import"@babel/polyfill";import{KEYS}from"./modules/key.js";import{writeFullYear}from"./modules/time.js";import{renderErrorMessage}from"./modules/message.js";import*as loader from"./modules/loader.js";import{fetchWeather}from"./modules/weather.js";import{quickLocations,insertGoogleMapAPIScript,fetchLocation}from"./modules/location.js";import*as display from"./modules/display.js";const initialize=e=>{writeFullYear(),initGeolocation()},initGeolocation=()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(success,fail):fail()},success=async position=>{insertGoogleMapAPIScript(KEYS.GOOGLE_KEY,KEYS.DARKSKY_KEY);const location=await fetchLocation(KEYS.GOOGLE_KEY,position.coords.latitude,position.coords.longitude),weather=await fetchWeather(KEYS.DARKSKY_KEY,position.coords.latitude,position.coords.longitude);loader.removeLoader(),display.displayLocation(location),display.displayWeather(weather),display.displayQuickLocations(quickLocations)},fail=positionError=>{renderErrorMessage(positionError)};document.addEventListener("DOMContentLoaded",initialize),loader.addLoader();